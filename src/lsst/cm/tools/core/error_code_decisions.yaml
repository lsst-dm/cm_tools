description: Lookup table for error codes from PanDA and error logs from science pipelines on HSC-RC2.

pandaErrorCode:
    trans, 1:
        p_aperture_correction:
            diagMessage: >
                Execution of task 'characterizeImage' on quantum {.*} failed. Exception
                RuntimeError: Unable to measure aperture correction for required algorithm 'modelfit_CModel': only 0 sources, but
                require at least 2.
            function: characterizeImage
            known: 1
            ticket: ["DM-37483", "DM-37089", "DM-36763", "DM-36356"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_psf_matching_kernel:
            diagMessage: "ERROR: Unable to calculate psf matching kernel"
            function: characterizeImage
            known: 1
            ticket: ["DM-37570", "DM-37483", "DM-36763", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        psf_in_GAaP:
            diagMessage: >
                Failed to solve for PSF matching kernel in GAaP for (.*): Problematic scaling factors = .* Errors: Exception
                ('Unable to determine kernel sum; 0 candidates')
            function: characterizeImage
            known: 1
            ticket: ["DM-37483", "DM-33375", "DM-36763", "DM-36356"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_psfex:
            diagMessage: "Only spatial variation (ndim == 2) is supported; saw 0"
            function: characterizeImage
            known: 1
            ticket: ["DM-37570"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_no_use_for_photocal:
            diagMessage: >
                Execution of task 'calibrate' on quantum {.*} failed. Exception
                RuntimeError: No matches to use for photocal
            function: calibrate
            known: 1
            ticket: ["DM-37483", "DM-37089", "DM-32291", "DM-36763"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_NaN_to_int_calibrate:
            diagMessage: >
                Execution of task 'calibrate' on quantum {.*} failed. Exception
                ValueError: cannot convert float NaN to integer
            function: calibrate
            known: 1
            ticket: ["DM-36356"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_FWHM_value_of_nan:
            diagMessage: >
                Execution of task 'calibrate' on quantum {.*} failed. Exception
                ValueError: PSF at (.*) has an invalid FWHM value of nan
            function: calibrate
            known: 1
            ticket: ["DM-37089", "DM-36763"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        finalizeCharacterization_failed:
            diagMessage: >
                Task <TaskDef(lsst.pipe.tasks.finalizeCharacterization.FinalizeCharacterizationTask, label=
                finalizeCharacterization) dataId={.*}> failed; processing will continue for remaining
                tasks.
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
        cant_start_new_thread:
            diagMessage: "RuntimeError: can't start new thread"
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
        rchar:
            diagMessage: "Error: attempt to reduce the monitored value of monotonic rchar from .* to .*"
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
        read_bytes:
            diagMessage: "Error: attempt to reduce the monitored value of monotonic read_bytes from .* to .*"
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
        terminate_after_sys_err:
            diagMessage: >
                terminate called after throwing an instance of 'std::system_error' what(): Resource temporarily unavailable
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
        pthread_create:
            diagMessage: "ERROR; return code from pthread_create() is 11 Error detail: Resource temporarily unavailable"
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
        url_timeout:
            diagMessage: >
                url=/cvmfs/atlas.cern.ch/repo/sw/local/etc/cric_pandaqueues.json, error: TimeoutException: Timeout reached,
                timeout=20 seconds .. trying to use data from cache=/tmp/atlas_4WNdEEY5/agis_schedconf.cvmfs.json
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
        p_fgcm_380:
            diagMessage: "Exception KeyError: (380, 40)"
            function: fgcmBuildStarsTable
            known: 1
            ticket: ["DM-37570"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0
        keyerror_0:
            diagMessage: |
                exposure = input_exposures[detector_id].get()
                KeyError: 0
            function: updateVisitSummary
            known: 1
            ticket: ["DM-37786", "DM-37570"]
            resolved: True
            rescue: False
            flavor: False
            intensity: 0
        outside_image_bounds:
            diagMessage: >
                Execution of task 'measure' on quantum {.*} failed. Exception
                IndexError: Index (.*) outside image bounds (.*) to (.*).
            function: measure
            known: 1
            ticket: ["DM-35722", "DM-36066"]
            resolved: True
            rescue: False
            flavor: False
            intensity: 0.001
        p_NaN_to_int_detection:
            diagMessage: >
                Execution of task 'detection' on quantum {.*} failed. Exception
                ValueError: cannot convert float NaN to integer
            function: detection
            known: 1
            ticket: ["DM-36763", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_all_pixels_masked:
            diagMessage: "All pixels masked. Cannot estimate background"
            function: detection
            known: 1
            ticket: ["DM-37570"]
            resolved: True
            rescue: False
            flavor: False
            intensity: 0.001
        p_psf_matching_kernel_subtractImages:
            diagMessage: "ERROR: Unable to calculate psf matching kernel"
            function: subtractImages
            known: 1
            ticket: ["DM-37570", "DM-37483", "DM-37089", "DM-36265", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        cannot_compute_coaddpsf:
            diagMessage: >
                Execution of task 'subtractImages' on quantum {.*} failed. Exception
                InvalidParameterError:\nFile \"\"src/CoaddPsf.cc\", line .*, in virtual std::shared_ptr<lsst::afw::image::
                Image<double> > lsst::meas::algorithms::CoaddPsf::doComputeKernelImage(const Point2D&, const lsst::afw::image::
                Color&) const\nCannot compute CoaddPsf at point (.*); no input images at that point. {0} lsst::pex::exceptions::
                InvalidParameterError: 'Cannot compute CoaddPsf at point (.*); no input images at that point.'
            function: subtractImages
            known: 1
            ticket: ["DM-37570", "DM-37483", "DM-37089", "DM-36265", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_kernel_candidacy:
            diagMessage: >
                Execution of task 'subtractImages' on quantum {.*} failed. Exception
                RuntimeError: Cannot find any objects suitable for KernelCandidacy
            function: subtractImages
            known: 1
            ticket: ["DM-37570", "DM-37483", "DM-36265", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_do_compute_kernel_image:
            diagMessage: >
                File "src/CoaddPsf.cc", line 254, in virtual std:shared_ptr > lsst:meas:
                algorithms:CoaddPsf:doComputeKernelImage(const Point2D&, const lsst:afw:image:Color&) const"
            function: subtractImages
            known: 1
            ticket: ["DM-37570", "DM-37483", "DM-36265", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        kernel_does_not_exist:
            diagMessage: "Original kernel does not exist {0}; Visiting candidate {1}{{}}"
            function: subtractImages
            known: 1
            ticket: ["DM-37570", "DM-37483", "DM-36265", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        kernel_sum:
            diagMessage: "Unable to determine kernel sum; 0 candidates"
            function: subtractImages
            known: 1
            ticket: ["DM-37483", "DM-36265", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_NaN_to_int_subtractImages:
            diagMessage: "Exception ValueError: cannot convert float NaN to integer"
            function: subtractImages
            known: 1
            ticket: ["DM-36265", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_array_sample_empty:
            diagMessage: "array of sample points is empty"
            function: subtractImages
            known: 1
            ticket: ["DM-37570"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_fp_xp:
            diagMessage: "fp and xp are not of the same length."
            function: subtractImages
            known: 1
            ticket: ["DM-37570"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        u_psf:
            diagMessage: >
                Exception ValueError: Failure from formatter 'lsst.daf.butler.formatters.parquet.ParquetFormatter' for
                dataset .*: Unrecognized column name 'u_psfFlux_flag'.
            function: catalogMatchTract
            known: 1
            ticket: ["DM-36305", "DM-36356"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        p_remote_io:
            diagMessage: >
                sqlalchemy.exc.InternalError: (psycopg2.errors.InternalError_) could not read block .* in file ".*":
                Remote I/O error
            function: mergeExecutionButler
            known: 1
            ticket: ["DM-37570"]
            resolved: True # DM-38007 needs to include a way to mark that if we see this the merge job should be re-run
            rescue: False
            flavor: True # later: mark as "usdf"
            intensity: 0
    pilot, 1305:
        aperture_correction:
            diagMessage: >
                Unable to measure aperture correction for required algorithm 'modelfit_CModel': only .* sources, but
                require at least 2
            function: characterizeImage
            known: 1
            ticket: ["DM-37483", "DM-37089"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        psfex:
            diagMessage: >
                File "src/PsfexPsf.cc", line 233, in virtual std:shared_ptr > lsst:meas:extensions:psfex:PsfexPsf:
                _doComputeImage(const Point2D&, const lsst:afw:image:Color&, const Point2D&) const
            function: characterizeImage
            known: 1
            ticket: ["DM-37570"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        FWHM_value_of_nan:
            diagMessage: "Failed to execute payload:PSF at (.*) has an invalid FWHM value of nan"
            function: calibrate
            known: 1
            ticket: ["DM-37089"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        NaN_to_int_calibrate:
            diagMessage: "Failed to execute payload:cannot convert float NaN to integer"
            function: calibrate
            known: 1
            ticket: ["DM-36356"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        no_use_for_photocal:
            diagMessage: "Failed to execute payload:No matches to use for photocal"
            function: calibrate
            known: 1
            ticket: ["DM-37483", "DM-37089", "DM-32291", "DM-36763"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        NaN_to_int_detection:
            diagMessage: "Failed to execute payload:cannot convert float NaN to integer"
            function: detection
            known: 1
            ticket: ["DM-36763", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        all_pixels_masked:
            diagMessage: "Failed to execute payload:All pixels masked. Cannot estimate background"
            function: detection
            known: 1
            ticket: ["DM-37837", "DM-37570"]
            resolved: True
            rescue: False
            flavor: False
            intensity: 0.001
        vague_finalizeCharacterization:
            diagMessage: "Failed to execute payload"
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
        do_compute_kernel_image:
            diagMessage: >
                Failed to execute payload:File \"src/CoaddPsf.cc\", line 254, in virtual std:shared_ptr > lsst:meas:algorithms:
                CoaddPsf:doComputeKernelImage(const Point2D&, const lsst:afw:image:Color&) const
            function: subtractImages
            known: 1
            ticket: ["DM-37483", "DM-37089", "DM-36265", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        kernel_candidacy:
            diagMessage: "Failed to execute payload:Cannot find any objects suitable for KernelCandidacy"
            function: subtractImages
            known: 1
            ticket: ["DM-37570", "DM-37483", "DM-37089", "DM-36265", "DM-36356", "DM-36066"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        psf_matching_kernel_subtractImages:
            diagMessage: "Failed to execute payload:Unable to calculate psf matching kernel"
            function: subtractImages
            known: 1
            ticket: ["DM-37570", "DM-37089"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        array_sample_empty:
            diagMessage: "Failed to execute payload:array of sample points is empty"
            function: subtractImages
            known: 1
            ticket: ["DM-37570"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        fp_xp:
            diagMessage: "Failed to execute payload:fp and xp are not of the same length."
            function: subtractImages
            known: 1
            ticket: ["DM-37570"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        parquet_formatter:
            diagMessage: >
                Failed to execute payload:Failure from formatter 'lsst.daf.butler.formatters.parquet.ParquetFormatter' for dataset
                .*
            function: catalogMatchTract
            known: 1
            ticket: ["DM-36306", "DM-36356"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0.001
        fgcm_380:
            diagMessage: "Failed to execute payload:(380, 40)"
            function: fgcmBuildStarsTable
            known: 1
            ticket: ["DM-37570"]
            resolved: False
            rescue: False
            flavor: False
            intensity: 0
        remote_io:
            diagMessage: "(psycopg2.errors.InternalError_) could not read block .* in file \".*\": Remote I/O error"
            function: mergeExecutionButler
            known: 1
            ticket: ["DM-37570"]
            resolved: True # double check this
            rescue: False
            flavor: True # later: mark as "usdf"
            intensity: 0
    taskbuffer, 300:
        failed_while_starting_job:
            diagMessage: "The worker was failed while the job was starting : .* gridjob roma shared .* FAILED .*."
            function:
            known: 1
            ticket: ["DM-37570", "DM-37483", "DM-36845", "DM-36763"]
            resolved: False
            rescue: True
            flavor: True
            intensity: 0
    taskbuffer, 102:
        expired_in_pending:
            diagMessage: "expired in pending. status unchanged"
            function:
            known: 1
            ticket: ["DM-37089"]
            resolved: False
            rescue: True
            flavor: True
            intensity: 0
    pilot, 1344:
        resource_temporarily_unavailable:
            diagMessage: "Exception caught: [Errno 11] Resource temporarily unavailable"
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
    trans, 134:
        sigabrt:
            diagMessage: >
                New trf: Transform received signal SIGABRT; Old trf: Athena core dump or timeout, or conddb DB connect exception
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
    jobdispatcher, 102:
        no_reply:
            diagMessage: "Sent job didn't receive reply from pilot within 30 min"
            function: finalizeCharacterization
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
    jobdispatcher, 100:
        lost_heartbeat:
            diagMessage: "lost heartbeat"
            function:
            known: 1
            ticket: ["DM-36356"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
    pilot, 1098:
        no_space_on_disk:
            diagMessage: "too little space left on local disk to run job: .* B (need > .* B)"
            function: forcedPhotCcd
            known: 1
            ticket: ["DM-36066"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
    trans, 137:
        sigkill:
            diagMessage: "Transform received signal SIGKILL"
            function:
            known: 1
            ticket: ["DM-37570", "DM-37483", "DM-36356", "DM-36741"]
            resolved: True
            rescue: True
            flavor: True
            intensity: 0
